<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL基礎講義</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="presentation-container">
        <div class="slide-counter">
            <span id="current-slide">1</span> / <span id="total-slides">18</span>
        </div>
        
        <!-- スライド1: タイトル -->
        <div class="slide active">
            <h1>🗄️ SQL基礎講義</h1>
            <div style="text-align: center; margin-top: 50px;">
                <h2 style="border: none; color: #3498db;">プログラミング学習者のための</h2>
                <h2 style="border: none; color: #3498db;">データベース操作入門</h2>
                <div style="margin-top: 80px; font-size: 1.2em; color: #7f8c8d;">
                    <p>⏰ 講義時間: 45-60分</p>
                    <p>🎯 実践重視のハンズオン形式</p>
                </div>
            </div>
        </div>
        
        <!-- スライド2: 講義の目標 -->
        <div class="slide">
            <h1>🎯 講義の目標</h1>
            <div class="goals">
                <h3>今日のゴール</h3>
                <ul>
                    <li>SQLの基本概念と重要性を理解する</li>
                    <li>基本的なCRUD操作ができるようになる</li>
                    <li>実際の開発でよく使われるSQL文を書けるようになる</li>
                </ul>
            </div>
            <div class="info">
                <strong>プログラマーにとってのSQL</strong><br>
                • Webアプリケーション開発では必須スキル<br>
                • バックエンド、フロントエンド問わず重要<br>
                • データ分析、レポート作成でも活用
            </div>
        </div>
        
        <!-- スライド3: SQLとは -->
        <div class="slide">
            <h1>💡 SQLとは？</h1>
            <h2>Structured Query Language</h2>
            <p><span class="highlight">構造化問い合わせ言語</span> - データベースとやり取りするための専用言語</p>
            
            <h3>🔹 主要なデータベースシステム</h3>
            <ul>
                <li><strong>MySQL</strong> - Webアプリケーションで人気</li>
                <li><strong>PostgreSQL</strong> - 高機能で拡張性が高い</li>
                <li><strong>SQLite</strong> - 軽量、学習・プロトタイプに最適</li>
                <li><strong>SQL Server</strong> - Microsoft製品との連携が強い</li>
            </ul>
            
            <div class="success">
                <strong>なぜSQLが重要？</strong><br>
                データなしのアプリケーションは存在しない！<br>
                ユーザー情報、投稿、商品データ...すべてデータベースに保存されています。
            </div>
        </div>
        
        <!-- スライド4: データベースの基本概念 -->
        <div class="slide">
            <h1>📊 データベースの基本概念</h1>
            <div class="two-column">
                <div>
                    <h3>🗃️ 基本要素</h3>
                    <ul>
                        <li><strong>データベース</strong>: データの倉庫</li>
                        <li><strong>テーブル</strong>: データの表</li>
                        <li><strong>カラム</strong>: 項目（列）</li>
                        <li><strong>レコード</strong>: データ（行）</li>
                        <li><strong>主キー</strong>: 各行の識別子</li>
                    </ul>
                </div>
                <div>
                    <h3>📋 usersテーブルの例</h3>
                    <table class="table-demo">
                        <tr>
                            <th>id (主キー)</th>
                            <th>name</th>
                            <th>email</th>
                            <th>age</th>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>田中太郎</td>
                            <td>tanaka@example.com</td>
                            <td>25</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>佐藤花子</td>
                            <td>sato@example.com</td>
                            <td>30</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- スライド5: SELECT文の基本 -->
        <div class="slide">
            <h1>🔍 SELECT文 - データの取得</h1>
            <h2>基本構文</h2>
            <div class="code-block">SELECT カラム名 FROM テーブル名;</div>
            
            <h3>📝 基本的な使い方</h3>
            <div class="code-block">-- 全データを取得
SELECT * FROM users;

-- 特定のカラムのみ取得
SELECT name, age FROM users;

-- 条件を指定して取得
SELECT * FROM users WHERE age > 25;</div>
            
            <div class="info">
                <strong>ポイント</strong><br>
                • * は全カラムを意味します<br>
                • WHERE句で条件を指定できます<br>
                • -- はコメントです
            </div>
        </div>
        
        <!-- スライド6: WHERE句の詳細 -->
        <div class="slide">
            <h1>🎯 WHERE句 - 条件指定</h1>
            <h2>比較演算子</h2>
            <div class="code-block">-- 等しい
SELECT * FROM users WHERE age = 25;

-- より大きい・小さい
SELECT * FROM users WHERE age > 30;
SELECT * FROM users WHERE age <= 25;

-- 等しくない
SELECT * FROM users WHERE age != 20;</div>
            
            <h2>論理演算子</h2>
            <div class="code-block">-- AND（かつ）
SELECT * FROM users WHERE age > 20 AND age < 30;

-- OR（または）
SELECT * FROM users WHERE age < 20 OR age > 50;

-- LIKE（パターンマッチング）
SELECT * FROM users WHERE name LIKE '%田%';</div>
        </div>
        
        <!-- スライド7: ORDER BY と LIMIT -->
        <div class="slide">
            <h1>📈 ORDER BY & LIMIT</h1>
            <h2>並び替え（ORDER BY）</h2>
            <div class="code-block">-- 昇順（小さい順）
SELECT * FROM users ORDER BY age;

-- 降順（大きい順）
SELECT * FROM users ORDER BY age DESC;

-- 複数カラムで並び替え
SELECT * FROM users ORDER BY age DESC, name;</div>
            
            <h2>件数制限（LIMIT）</h2>
            <div class="code-block">-- 上位3件のみ取得
SELECT * FROM users ORDER BY age DESC LIMIT 3;

-- 年齢が高い順に5件
SELECT name, age FROM users ORDER BY age DESC LIMIT 5;</div>
        </div>
        
        <!-- スライド8: INSERT文 -->
        <div class="slide">
            <h1>➕ INSERT文 - データの追加</h1>
            <h2>基本構文</h2>
            <div class="code-block">INSERT INTO テーブル名 (カラム名1, カラム名2, ...) 
VALUES (値1, 値2, ...);</div>
            
            <h3>📝 実例</h3>
            <div class="code-block">-- 新しいユーザーを追加
INSERT INTO users (name, email, age) 
VALUES ('山田太郎', 'yamada@example.com', 28);

-- 複数レコードを一括追加
INSERT INTO users (name, email, age) VALUES 
('鈴木花子', 'suzuki@example.com', 24),
('高橋次郎', 'takahashi@example.com', 32);</div>
            
            <div class="info">
                <strong>ポイント</strong><br>
                • カラム名と値の順序を合わせる<br>
                • 文字列は引用符で囲む<br>
                • 複数行の挿入も可能
            </div>
        </div>
        
        <!-- スライド9: UPDATE文 -->
        <div class="slide">
            <h1>✏️ UPDATE文 - データの更新</h1>
            <h2>基本構文</h2>
            <div class="code-block">UPDATE テーブル名 SET カラム名 = 新しい値 WHERE 条件;</div>
            
            <h3>📝 実例</h3>
            <div class="code-block">-- 特定ユーザーの年齢を更新
UPDATE users SET age = 26 WHERE id = 1;

-- 複数項目を同時更新
UPDATE users 
SET name = '田中一郎', age = 26 
WHERE id = 1;

-- 条件に合致する複数レコードを更新
UPDATE users SET age = age + 1 WHERE age < 30;</div>
            
            <div class="warning">
                <strong>⚠️ 重要な注意点</strong><br>
                WHERE句を忘れると全てのレコードが更新されます！<br>
                更新前に必ずSELECTで確認しましょう。
            </div>
        </div>
        
        <!-- スライド10: DELETE文 -->
        <div class="slide">
            <h1>🗑️ DELETE文 - データの削除</h1>
            <h2>基本構文</h2>
            <div class="code-block">DELETE FROM テーブル名 WHERE 条件;</div>
            
            <h3>📝 実例</h3>
            <div class="code-block">-- 削除前に確認（重要！）
SELECT * FROM users WHERE age > 50;

-- 実際に削除
DELETE FROM users WHERE age > 50;

-- 特定のユーザーを削除
DELETE FROM users WHERE id = 1;</div>
            
            <div class="warning">
                <strong>⚠️ 非常に重要な注意点</strong><br>
                WHERE句を忘れると全てのレコードが削除されます！<br>
                削除は元に戻せません。必ず事前にSELECTで確認！
            </div>
        </div>
        
        <!-- スライド11: CRUD操作まとめ -->
        <div class="slide">
            <h1>📋 CRUD操作まとめ</h1>
            <table class="table-demo" style="font-size: 0.9em;">
                <tr>
                    <th>操作</th>
                    <th>SQL文</th>
                    <th>用途</th>
                    <th>例</th>
                </tr>
                <tr>
                    <td><strong>C</strong>reate</td>
                    <td>INSERT</td>
                    <td>データ追加</td>
                    <td>新規ユーザー登録</td>
                </tr>
                <tr>
                    <td><strong>R</strong>ead</td>
                    <td>SELECT</td>
                    <td>データ取得</td>
                    <td>ユーザー一覧表示</td>
                </tr>
                <tr>
                    <td><strong>U</strong>pdate</td>
                    <td>UPDATE</td>
                    <td>データ更新</td>
                    <td>プロフィール変更</td>
                </tr>
                <tr>
                    <td><strong>D</strong>elete</td>
                    <td>DELETE</td>
                    <td>データ削除</td>
                    <td>アカウント削除</td>
                </tr>
            </table>
            
            <div class="success">
                <strong>🎉 おめでとうございます！</strong><br>
                基本的なCRUD操作をマスターしました！<br>
                これでデータベースの基本操作ができるようになりました。
            </div>
        </div>
        
        <!-- スライド12: 集計関数 -->
        <div class="slide">
            <h1>📊 集計関数</h1>
            <h2>よく使われる集計関数</h2>
            <div class="code-block">-- レコード数をカウント
SELECT COUNT(*) FROM users;

-- 平均年齢を計算
SELECT AVG(age) FROM users;

-- 最大値・最小値
SELECT MAX(age), MIN(age) FROM users;

-- 合計値
SELECT SUM(age) FROM users;</div>
            
            <h2>GROUP BY句</h2>
            <div class="code-block">-- 年齢別のユーザー数
SELECT age, COUNT(*) 
FROM users 
GROUP BY age;

-- 年代別の平均年齢
SELECT 
    CASE 
        WHEN age < 30 THEN '20代'
        WHEN age < 40 THEN '30代'
        ELSE '40代以上'
    END as age_group,
    COUNT(*) as user_count
FROM users 
GROUP BY age_group;</div>
        </div>
        
        <!-- スライド13: JOIN の基礎 -->
        <div class="slide">
            <h1>🔗 JOIN - テーブルの結合</h1>
            <h2>2つのテーブルを関連付ける</h2>
            <div class="two-column">
                <div>
                    <h3>usersテーブル</h3>
                    <table class="table-demo" style="font-size: 0.8em;">
                        <tr><th>id</th><th>name</th></tr>
                        <tr><td>1</td><td>田中</td></tr>
                        <tr><td>2</td><td>佐藤</td></tr>
                    </table>
                    
                    <h3>postsテーブル</h3>
                    <table class="table-demo" style="font-size: 0.8em;">
                        <tr><th>id</th><th>title</th><th>user_id</th></tr>
                        <tr><td>1</td><td>初投稿</td><td>1</td></tr>
                        <tr><td>2</td><td>SQLの学習</td><td>2</td></tr>
                    </table>
                </div>
                <div>
                    <h3>JOIN構文</h3>
                    <div class="code-block" style="font-size: 0.8em;">-- ユーザーと投稿を結合
SELECT u.name, p.title 
FROM users u 
JOIN posts p ON u.id = p.user_id;</div>
                    
                    <h3>結果</h3>
                    <table class="table-demo" style="font-size: 0.8em;">
                        <tr><th>name</th><th>title</th></tr>
                        <tr><td>田中</td><td>初投稿</td></tr>
                        <tr><td>佐藤</td><td>SQLの学習</td></tr>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- スライド14: 実践的な例 -->
        <div class="slide">
            <h1>💼 実践的な活用例</h1>
            <h2>Webアプリケーションでよく使うSQL</h2>
            <div class="code-block"><span class="comment">-- ログイン認証</span>
<span class="keyword">SELECT</span> * 
<span class="keyword">FROM</span> users 
<span class="keyword">WHERE</span> email = 'user@example.com' 
  <span class="keyword">AND</span> password = 'hashed_password';

<span class="comment">-- 最新の投稿を5件取得</span>
<span class="keyword">SELECT</span> title, content, created_at 
<span class="keyword">FROM</span> posts 
<span class="keyword">ORDER BY</span> created_at <span class="keyword">DESC</span> 
<span class="keyword">LIMIT</span> 5;

<span class="comment">-- ユーザーの投稿数をカウント</span>
<span class="keyword">SELECT</span> u.name, <span class="keyword">COUNT</span>(p.id) <span class="keyword">as</span> post_count
<span class="keyword">FROM</span> users u
<span class="keyword">LEFT JOIN</span> posts p <span class="keyword">ON</span> u.id = p.user_id
<span class="keyword">GROUP BY</span> u.id, u.name;

<span class="comment">-- 検索機能</span>
<span class="keyword">SELECT</span> * 
<span class="keyword">FROM</span> posts 
<span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> '%SQL%' 
   <span class="keyword">OR</span> content <span class="keyword">LIKE</span> '%SQL%';</div>
        </div>
        
        <!-- スライド15: サブクエリ -->
        <div class="slide">
            <h1>🔍 サブクエリ - クエリの中のクエリ</h1>
            
            <h2>サブクエリとは？</h2>
            <p>別のSELECT文の中で使用されるSELECT文のことです。複雑なデータの取得や条件指定に役立ちます。</p>

            <h3>基本的なサブクエリ</h3>
            <div class="code-block"><span class="comment">-- 平均年齢より年上のユーザーを取得</span>
<span class="keyword">SELECT</span> name, age
<span class="keyword">FROM</span> users
<span class="keyword">WHERE</span> age > (
    <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(age)
    <span class="keyword">FROM</span> users
);

<span class="comment">-- 投稿数が最も多いユーザーを取得</span>
<span class="keyword">SELECT</span> u.name, post_count
<span class="keyword">FROM</span> users u
<span class="keyword">JOIN</span> (
    <span class="keyword">SELECT</span> user_id, <span class="keyword">COUNT</span>(*) <span class="keyword">as</span> post_count
    <span class="keyword">FROM</span> posts
    <span class="keyword">GROUP BY</span> user_id
    <span class="keyword">ORDER BY</span> post_count <span class="keyword">DESC</span>
    <span class="keyword">LIMIT</span> 1
) top_poster <span class="keyword">ON</span> u.id = top_poster.user_id;</div>

            <h3>相関サブクエリ</h3>
            <div class="code-block"><span class="comment">-- 各部署の平均給与より高給与の従業員を取得</span>
<span class="keyword">SELECT</span> e.name, e.salary, e.department_id
<span class="keyword">FROM</span> employees e
<span class="keyword">WHERE</span> salary > (
    <span class="keyword">SELECT</span> <span class="keyword">AVG</span>(salary)
    <span class="keyword">FROM</span> employees
    <span class="keyword">WHERE</span> department_id = e.department_id
);</div>

            <div class="info">
                <strong>サブクエリのポイント</strong><br>
                • 丸括弧()で囲む必要があります<br>
                • 単一の値を返すサブクエリと複数の値を返すサブクエリがあります<br>
                • <span class="keyword">IN</span>, <span class="keyword">EXISTS</span>, <span class="keyword">ANY</span>, <span class="keyword">ALL</span>などと組み合わせて使用できます
            </div>

            <div class="warning">
                <strong>注意点</strong><br>
                • パフォーマンスに影響を与える可能性があるため、必要な場合のみ使用しましょう<br>
                • 複雑なサブクエリは可読性が低下する場合があります
            </div>
        </div>
        
        <!-- スライド16: インデックス -->
        <div class="slide">
            <h1>📊 インデックス - パフォーマンスの要</h1>
            
            <h2>インデックスとは？</h2>
            <p>データベースのパフォーマンスを向上させるための索引機能です。本の索引のように、データの検索を高速化します。</p>

            <div class="two-column">
                <div>
                    <h3>インデックスの種類</h3>
                    <ul>
                        <li><strong>主キーインデックス</strong>: 自動的に作成される</li>
                        <li><strong>単一列インデックス</strong>: 1つのカラムに対して作成</li>
                        <li><strong>複合インデックス</strong>: 複数のカラムに対して作成</li>
                        <li><strong>ユニークインデックス</strong>: 重複を許さない</li>
                    </ul>
                </div>
                <div>
                    <h3>インデックスが有効な場面</h3>
                    <ul>
                        <li>WHERE句での検索</li>
                        <li>JOIN操作</li>
                        <li>ORDER BY での並び替え</li>
                        <li>GROUP BY での集約</li>
                    </ul>
                </div>
            </div>

            <h3>インデックスの作成と削除</h3>
            <div class="code-block"><span class="comment">-- インデックスの作成</span>
<span class="keyword">CREATE INDEX</span> idx_email 
<span class="keyword">ON</span> users(email);

<span class="comment">-- 複合インデックスの作成</span>
<span class="keyword">CREATE INDEX</span> idx_name_age 
<span class="keyword">ON</span> users(name, age);

<span class="comment">-- ユニークインデックスの作成</span>
<span class="keyword">CREATE UNIQUE INDEX</span> idx_unique_email 
<span class="keyword">ON</span> users(email);

<span class="comment">-- インデックスの削除</span>
<span class="keyword">DROP INDEX</span> idx_email;</div>

            <div class="warning">
                <strong>インデックスの注意点</strong><br>
                • インデックスは更新操作（INSERT/UPDATE/DELETE）を遅くする可能性があります<br>
                • 不必要なインデックスはパフォーマンスを低下させる原因になります<br>
                • 大量のデータを扱う場合は、インデックス設計が重要です
            </div>
        </div>

        <!-- スライド17: トランザクション -->
        <div class="slide">
            <h1>🔄 トランザクション - データの整合性を守る</h1>
            
            <h2>トランザクションとは？</h2>
            <p>複数のSQL文をまとめて実行する仕組みで、データの一貫性を保証します。全ての処理が成功するか、全て失敗するかのどちらかになります。</p>

            <h3>ACID特性</h3>
            <div class="info">
                <ul>
                    <li><strong>Atomicity（原子性）</strong>: 全て成功するか、全て失敗するか</li>
                    <li><strong>Consistency（一貫性）</strong>: データベースの整合性を保つ</li>
                    <li><strong>Isolation（独立性）</strong>: トランザクション同士が干渉しない</li>
                    <li><strong>Durability（永続性）</strong>: 完了したトランザクションは永続的</li>
                </ul>
            </div>

            <h3>基本的なトランザクション操作</h3>
            <div class="code-block"><span class="comment">-- トランザクションの開始</span>
<span class="keyword">BEGIN TRANSACTION</span>;

<span class="comment">-- 銀行送金の例</span>
<span class="keyword">UPDATE</span> accounts 
<span class="keyword">SET</span> balance = balance - 1000
<span class="keyword">WHERE</span> account_id = 1;

<span class="keyword">UPDATE</span> accounts 
<span class="keyword">SET</span> balance = balance + 1000
<span class="keyword">WHERE</span> account_id = 2;

<span class="comment">-- 問題なければコミット</span>
<span class="keyword">COMMIT</span>;

<span class="comment">-- 問題があれば巻き戻し</span>
<span class="keyword">ROLLBACK</span>;</div>

            <h3>トランザクション分離レベル</h3>
            <div class="code-block"><span class="comment">-- 分離レベルの設定</span>
<span class="keyword">SET TRANSACTION ISOLATION LEVEL</span> READ COMMITTED;

<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> accounts 
<span class="keyword">WHERE</span> account_id = 1;</div>

            <div class="warning">
                <strong>トランザクションの注意点</strong><br>
                • トランザクションは短く保つ（長時間のロックを避ける）<br>
                • デッドロックに注意<br>
                • 適切な分離レベルを選択する
            </div>
        </div>
        
        <!-- スライド18: まとめ・次のステップ -->
        <div class="slide">
            <h1>🎉 まとめ・次のステップ</h1>
            <div class="success">
                <h3>🎯 今日学んだこと</h3>
                <div class="two-column">
                    <div>
                        <h4>基本操作</h4>
                        <ul>
                            <li>CRUD操作の基本</li>
                            <li>SELECT文とWHERE句</li>
                            <li>ORDER BY、GROUP BY</li>
                            <li>JOIN操作の基礎</li>
                        </ul>
                        
                        <h4>データ集計</h4>
                        <ul>
                            <li>集計関数（COUNT, AVG等）</li>
                            <li>グループ化と集計</li>
                            <li>条件付き集計</li>
                        </ul>
                    </div>
                    <div>
                        <h4>高度な機能</h4>
                        <ul>
                            <li>サブクエリの活用</li>
                            <li>インデックスの基礎</li>
                            <li>トランザクション処理</li>
                            <li>実践的なクエリ例</li>
                        </ul>
                        
                        <h4>データベース設計</h4>
                        <ul>
                            <li>テーブル間の関係</li>
                            <li>主キーと外部キー</li>
                            <li>正規化の基本概念</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <h2>📚 次に学ぶべきこと</h2>
            <div class="two-column">
                <div>
                    <h3>🔍 より深い知識</h3>
                    <ul>
                        <li>高度なJOIN技法（FULL OUTER JOIN等）</li>
                        <li>ウィンドウ関数（OVER句）</li>
                        <li>複雑なサブクエリとCTE</li>
                        <li>ビューとマテリアライズドビュー</li>
                        <li>ストアドプロシージャとトリガー</li>
                        <li>パーティショニングとシャーディング</li>
                    </ul>
                </div>
                <div>
                    <h3>💡 実践的スキル</h3>
                    <ul>
                        <li>クエリのパフォーマンスチューニング</li>
                        <li>インデックス設計の最適化</li>
                        <li>トランザクション分離レベルの使い分け</li>
                        <li>大規模データの効率的な処理</li>
                        <li>セキュリティとアクセス制御</li>
                        <li>バックアップと復旧戦略</li>
                    </ul>
                </div>
            </div>
            
            <div class="info">
                <strong>🛠️ 実践のすすめ</strong>
                <ul>
                    <li><strong>ハンズオン練習</strong>: SQLiteやPostgreSQLで実際にクエリを書いてみる</li>
                    <li><strong>サンプルプロジェクト</strong>: 小規模なアプリケーションを作ってデータベースを活用する</li>
                    <li><strong>オンライン学習</strong>: SQL練習サイトやチュートリアルを活用する</li>
                    <li><strong>実際のプロジェクト</strong>: オープンソースプロジェクトのSQL文を読んで学ぶ</li>
                </ul>
            </div>
        </div>
        
        <div class="navigation">
            <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)">← 前へ</button>
            <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">次へ →</button>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>